"use strict";function _createForOfIteratorHelper(e,t){var n,o,r,a,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return o=!(n=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return n=e.done,e},e:function(e){o=!0,r=e},f:function(){try{n||null==i.return||i.return()}finally{if(o)throw r}}};if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var myMap,video,durationControl,soundControl,intervalid,soundLevel,openItem=function(e){var e=e.closest(".team__item"),t=e.find(".team__content"),n=t.find(".team__content-block").height();e.addClass("active"),t.height(n)},closeEveryItem=function(e){var t=e.find(".team__content");e.find(".team__item").removeClass("active"),t.height(0)},toggleHamburgerMenu=($(".team__title-name").click(function(e){var e=$(e.currentTarget),t=e.closest(".team");e.closest(".team__item").hasClass("active")?closeEveryItem(t):(closeEveryItem(t),openItem(e))}),function(){$("#hamburger").toggleClass("hamburger--active"),$(".menu").toggleClass("menu--active")}),init=($("#hamburger").on("click",function(e){e.preventDefault(),toggleHamburgerMenu()}),$(".menu__link").on("click",function(e){e.preventDefault(),toggleHamburgerMenu()}),function(){myMap=new ymaps.Map("map",{center:[59.935274,30.312388],zoom:11,controls:[]});var t=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"/img/maps.png",iconImageSize:[46,57],iconImageOffset:[-35,-51]});[[59.94554327989287,30.38935262114668],[59.91142323563909,30.50024587065841]].forEach(function(e){t.add(new ymaps.Placemark(e))}),myMap.geoObjects.add(t),myMap.behaviors.disable("scrollZoom")}),validateFields=(ymaps.ready(init),!function(){function i(e,t){var n=(e=e.next()).children();e.width(t+"px"),0!==t&&n.outerWidth(t+"px")}function o(e){e.parent().removeClass("menu-prod__item--active"),e.removeClass("menu-prod__button--active"),i(e,0)}function r(e){var t,n,o,r,a;e.parent().addClass("menu-prod__item--active"),e.addClass("menu-prod__button--active"),t=e,n=524,o=$(window).width(),t=t.outerWidth(!0),r=window.matchMedia("(max-width: 768px").matches,a=window.matchMedia("(max-width: 480px").matches,r&&(n=o-t*l.length),i(e,n=a?o-t:n)}var l=$(".menu-prod__item");$(".menu-prod__button").click(function(e){e.preventDefault();var e=$(e.currentTarget),t=e.hasClass("menu-prod__button--active"),n=$(".menu-prod__button--active");e.hasClass("menu-prod__button")&&t&&n&&o(n),e.hasClass("menu-prod__button")&&!t&&(n&&o(n),r(e))})}(),function(e,t){return t.forEach(function(e){e.removeClass("input-error"),""===e.val().trim()&&e.addClass("input-error")}),0===e.find(".input-error").length}),findBlockByAlias=($(".form").submit(function(e){e.preventDefault();var e=$(e.currentTarget),t=e.find("[name='name']"),n=e.find("[name='phone']"),o=e.find("[name='comment']"),r=e.find("[name='to']"),a=$("#modal"),i=a.find(".modal__content");a.removeClass("error-modal"),validateFields(e,[t,n,o,r])&&((e=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:t.val(),phone:n.val(),comment:o.val(),to:r.val()}})).done(function(e){i.text(e.message)}),e.fail(function(e){e=e&&e.hasOwnProperty("responseJSON")&&e.responseJSON.hasOwnProperty("message")?e.responseJSON.message:"Произошла ошибка, попробуйте позже";i.text(e),a.addClass("error-modal")}),e.always(function(){$.fancybox.open({src:"#modal",type:"inline"})}))}),$(".app-submit-btn").click(function(e){e.preventDefault(),$.fancybox.close()}),function(n){return $(".reviews__item").filter(function(e,t){return $(t).attr("data-linked-with")==n})}),slider=($(".interactive-avatar__link").click(function(e){e.preventDefault();var e=$(e.currentTarget),t=e.attr("data-open"),t=findBlockByAlias(t),e=e.closest(".reviews__switcher-item");t.addClass("reviews__item--active").siblings().removeClass("reviews__item--active"),e.addClass("interactive-avatar--active").siblings().removeClass("interactive-avatar--active")}),!function(){var e,n=document.querySelector(".wrapper").querySelector(".maincontent"),d=n.querySelectorAll(".section"),o=document.querySelectorAll(".fixed-menu__item"),t=document.querySelectorAll("[data-scroll-to]"),r=!1,a=_createForOfIteratorHelper(t);try{for(a.s();!(e=a.n()).done;)!function(){var t=e.value;t.addEventListener("click",function(e){e.preventDefault(),i(t.dataset.scrollTo)})}()}catch(e){a.e(e)}finally{a.f()}function i(u){var e="".concat(-100*u,"%");function t(e){e[u].classList.add("is-active");var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;o!=e[u]&&o.classList.remove("is-active")}}catch(e){n.e(e)}finally{n.f()}var r=d[u].dataset.light,a=$(".fixed-menu__item"),i=$(".fixed-menu__link"),l=$(".hamburger__plank");1==r?(a.addClass("dark"),i.addClass("dark"),l.addClass("dark")):(a.removeClass("dark"),i.removeClass("dark"),l.removeClass("dark"))}r||(r=!0,t(d),n.style.transform="translateY(".concat(e,")"),setTimeout(function(){r=!1,t(o)},1e3))}function l(e){var t=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.classList.contains("is-active"))return{iterIndex:t,iterActive:n,iterNext:n.nextElementSibling,iterPrev:n.previousElementSibling}}}(d);"up"===e&&t.iterNext&&i(t.iterIndex+1),"down"===e&&t.iterPrev&&i(t.iterIndex-1)}document.addEventListener("wheel",function(e){l(0<e.deltaY?"up":"down")}),document.addEventListener("keydown",function(e){switch(e.keyCode){case 40:l("up");break;case 38:l("down")}})}(),$(".long__slider").bxSlider({pager:!1,controls:!1}));function playStop(){document.querySelector(".video__play").classList.toggle("video__play--active"),durationControl.max=video.duration,video.paused?(video.play(),intervalid=setInterval(updateDuration,1e3/66)):(video.pause(),clearInterval(intervalid)),updateDuration()}function updateDuration(){durationControl.value=video.currentTime}function stopInterval(){video.pause(),clearInterval(intervalid)}function setVideoDuration(){video.currentTime=durationControl.value,intervalid=setInterval(updateDuration,1e3/66)}function changeSoundVolume(){video.volume=soundControl.value/10}function soundOf(){0===video.volume?(video.volume=soundLevel,soundControl.value=10*soundLevel):(soundLevel=video.volume,video.volume=0,soundControl.value=0)}$(".slider__prod--back").click(function(e){e.preventDefault(),slider.goToPrevSlide()}),$(".slider__prod--next").click(function(e){e.preventDefault(),slider.goToNextSlide()}),video=document.querySelector("#video"),document.addEventListener("DOMContentLoaded",function(e){video.addEventListener("click",playStop);for(var t=document.querySelectorAll(".play"),n=0;n<t.length;n++)t[n].addEventListener("click",playStop);document.getElementById("micLevel").addEventListener("click",soundOf),(durationControl=document.getElementById("durationLevel")).addEventListener("input",setVideoDuration),durationControl.min=0,durationControl.value=0,(soundControl=document.getElementById("volumeLevel")).addEventListener("click",changeSoundVolume),soundControl.addEventListener("mouseup",changeSoundVolume),soundControl.min=0,soundControl.max=10,soundControl.value=soundControl.max});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY29yZC5qcyIsIm1hcC5qcyIsInZpZGVvLmpzIiwiaGFtYnVyZ2VyLmpzIiwibW9kYWwuanMiLCJtZW51LXByb2QuanMiLCJyZXZpZXdzLmpzIiwic2xpZGVyLmpzIiwic2Nyb2xsLmpzIl0sIm5hbWVzIjpbIm15TWFwIiwidmlkZW8iLCJkdXJhdGlvbkNvbnRyb2wiLCJzb3VuZENvbnRyb2wiLCJpbnRlcnZhbGlkIiwic291bmRMZXZlbCIsIm9wZW5JdGVtIiwiaXRlbSIsImNvbnRhaW5lciIsImNsb3Nlc3QiLCJjb250ZW50QmxvY2siLCJmaW5kIiwicmVxSGVpZ2h0IiwiaGVpZ2h0IiwiYWRkQ2xhc3MiLCJjbG9zZUV2ZXJ5SXRlbSIsIml0ZW1zIiwicmVtb3ZlQ2xhc3MiLCJ0b2dnbGVIYW1idXJnZXJNZW51IiwiJCIsImNsaWNrIiwiZSIsIiR0aGlzIiwiY3VycmVudFRhcmdldCIsImhhc0NsYXNzIiwidG9nZ2xlQ2xhc3MiLCJpbml0Iiwib24iLCJwcmV2ZW50RGVmYXVsdCIsInltYXBzIiwiTWFwIiwiY2VudGVyIiwiem9vbSIsImNvbnRyb2xzIiwibXlDb2xsZWN0aW9uIiwiR2VvT2JqZWN0Q29sbGVjdGlvbiIsImRyYWdnYWJsZSIsImljb25MYXlvdXQiLCJpY29uSW1hZ2VIcmVmIiwiaWNvbkltYWdlU2l6ZSIsImljb25JbWFnZU9mZnNldCIsImZvckVhY2giLCJjb29yZCIsImFkZCIsIlBsYWNlbWFyayIsImdlb09iamVjdHMiLCJiZWhhdmlvcnMiLCJkaXNhYmxlIiwidmFsaWRhdGVGaWVsZHMiLCJyZWFkeSIsInNldEl0ZW1XaXRoIiwid2lkdGgiLCJpdGVtVGV4dCIsIml0ZW1Db250ZW50IiwibmV4dCIsImNoaWxkcmVuIiwib3V0ZXJXaWR0aCIsImNsb3NlSXRlbSIsInBhcmVudCIsIm9wZW5JdGVtVmFyaWFudCIsInJlc3VsdFdpZHRoIiwid2luZG93V2lkdGgiLCJpc1RhYmxldCIsImlzTW9iaWxlIiwid2luZG93IiwiaXRlbVdpZHRoIiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiLCJsZW5ndGgiLCJpc0FjdGl2ZSIsImFjdGl2ZUVsZW1lbnQiLCJmb3JtIiwiZmllbGRzQXJyYXkiLCJmaWVsZCIsInZhbCIsInRyaW0iLCJmaW5kQmxvY2tCeUFsaWFzIiwic3VibWl0IiwibmFtZSIsInBob25lIiwiY29tbWVudCIsInRvIiwibW9kYWwiLCJjb250ZW50IiwicmVxdWVzdCIsImFqYXgiLCJ1cmwiLCJtZXRob2QiLCJkYXRhIiwiZG9uZSIsInRleHQiLCJtZXNzYWdlIiwiZmFpbCIsImhhc093blByb3BlcnR5IiwicmVzcG9uc2VKU09OIiwiYWx3YXlzIiwiZmFuY3lib3giLCJvcGVuIiwic3JjIiwidHlwZSIsImNsb3NlIiwiYWxpYXMiLCJmaWx0ZXIiLCJuZHgiLCJhdHRyIiwic2xpZGVyIiwidGFyZ2V0IiwiaXRlbVRvU2hvdyIsImN1ckl0ZW0iLCJzaWJsaW5ncyIsIl9zdGVwMiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInBhZ2VzIiwicXVlcnlTZWxlY3RvckFsbCIsInBvaW50cyIsImRhdGFTY3JvbGx0byIsImluU2Nyb2xsIiwiX2l0ZXJhdG9yMiIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIiwicyIsIm4iLCJfbG9vcCIsInBvaW50IiwidmFsdWUiLCJhZGRFdmVudExpc3RlbmVyIiwiZG9UcmFuc2l0aW9uIiwiZGF0YXNldCIsInNjcm9sbFRvIiwiZXJyIiwiZiIsInBhZ2VOdW1iZXIiLCJwb3NpdGlvbiIsImNvbmNhdCIsImFyciIsImNsYXNzTGlzdCIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwicmVtb3ZlIiwiZGF0YUxpZ2h0IiwibGlnaHQiLCJmaXhlZE1lbnUiLCJmaXhlZE1lbnVMaW5rIiwiaGFtYnVyZ2VyIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJzZXRUaW1lb3V0Iiwic2Nyb2xsVG9QYWdlIiwiZGlyZWN0IiwicGFnZSIsImkiLCJpdGVyIiwiY29udGFpbnMiLCJpdGVySW5kZXgiLCJpdGVyQWN0aXZlIiwiaXRlck5leHQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJpdGVyUHJldiIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJkZWx0YVkiLCJrZXlDb2RlIiwiYnhTbGlkZXIiLCJwYWdlciIsInBsYXlTdG9wIiwidG9nZ2xlIiwibWF4IiwiZHVyYXRpb24iLCJwYXVzZWQiLCJwbGF5Iiwic2V0SW50ZXJ2YWwiLCJ1cGRhdGVEdXJhdGlvbiIsInBhdXNlIiwiY2xlYXJJbnRlcnZhbCIsImN1cnJlbnRUaW1lIiwic3RvcEludGVydmFsIiwic2V0VmlkZW9EdXJhdGlvbiIsImNoYW5nZVNvdW5kVm9sdW1lIiwidm9sdW1lIiwic291bmRPZiIsImdvVG9QcmV2U2xpZGUiLCJnb1RvTmV4dFNsaWRlIiwicGxheUJ1dHRvbnMiLCJnZXRFbGVtZW50QnlJZCIsIm1pbiJdLCJtYXBwaW5ncyI6Im9vQ0FBQSxJQ0FBQSxNQ0FBQyxNQUNBQyxnQkFDQUMsYUFDQUMsV0FDQUMsV0ZKQUMsU0FBQSxTQUFBQyxHQUVBLElBQUFDLEVBQUFELEVBQUFFLFFBQUEsYUFBQSxFQUNBQyxFQUFBRixFQUFBRyxLQUFBLGdCQUFBLEVBRUFDLEVBREFGLEVBQUFDLEtBQUEsc0JBQUEsRUFDQUUsT0FBQSxFQUVBTCxFQUFBTSxTQUFBLFFBQUEsRUFDQUosRUFBQUcsT0FBQUQsQ0FBQSxDQUNBLEVBRUFHLGVBQUEsU0FBQVAsR0FDQSxJQUFBUSxFQUFBUixFQUFBRyxLQUFBLGdCQUFBLEVBQ0FILEVBQUFHLEtBQUEsYUFBQSxFQUVBTSxZQUFBLFFBQUEsRUFDQUQsRUFBQUgsT0FBQSxDQUFBLENBQ0EsRUdqQkFLLHFCSG1CQUMsRUFBQSxtQkFBQSxFQUFBQyxNQUFBLFNBQUFDLEdBQ0EsSUFBQUMsRUFBQUgsRUFBQUUsRUFBQUUsYUFBQSxFQUNBZixFQUFBYyxFQUFBYixRQUFBLE9BQUEsRUFDQWEsRUFBQWIsUUFBQSxhQUFBLEVBRUFlLFNBQUEsUUFBQSxFQUNBVCxlQUFBUCxDQUFBLEdBRUFPLGVBQUFQLENBQUEsRUFDQUYsU0FB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QkFBQSxVQUFBbUQsaUJBQUEsRUFHQTdLLGFBQUFvTCxJQUFBLEVBQ0FwTCxhQUFBa0ssSUFBQSxHQUVBbEssYUFBQXlILE1BQUF6SCxhQUFBa0ssR0FDQSxDQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBvcGVuSXRlbSA9IGl0ZW0gPT4ge1xyXG5cclxuY29uc3QgY29udGFpbmVyID0gaXRlbS5jbG9zZXN0KFwiLnRlYW1fX2l0ZW1cIik7XHJcbmNvbnN0IGNvbnRlbnRCbG9jayA9IGNvbnRhaW5lci5maW5kKFwiLnRlYW1fX2NvbnRlbnRcIik7XHJcbmNvbnN0IHRleHRCbG9jayA9IGNvbnRlbnRCbG9jay5maW5kKFwiLnRlYW1fX2NvbnRlbnQtYmxvY2tcIik7XHJcbmNvbnN0IHJlcUhlaWdodCA9IHRleHRCbG9jay5oZWlnaHQoKTtcclxuXHJcbmNvbnRhaW5lci5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuY29udGVudEJsb2NrLmhlaWdodChyZXFIZWlnaHQpO1xyXG59XHJcblxyXG5jb25zdCBjbG9zZUV2ZXJ5SXRlbSA9IGNvbnRhaW5lciA9PiB7XHJcbiAgICBjb25zdCBpdGVtcyA9IGNvbnRhaW5lci5maW5kKCcudGVhbV9fY29udGVudCcpO1xyXG4gICAgY29uc3QgaXRlbUNvbnRhaW5lciA9IGNvbnRhaW5lci5maW5kKFwiLnRlYW1fX2l0ZW1cIik7XHJcblxyXG4gICAgaXRlbUNvbnRhaW5lci5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgIGl0ZW1zLmhlaWdodCgwKTtcclxufVxyXG5cclxuJCgnLnRlYW1fX3RpdGxlLW5hbWUnKS5jbGljayhlID0+IHtcclxuICAgIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gJHRoaXMuY2xvc2VzdCgnLnRlYW0nKTtcclxuICAgIGNvbnN0IGVsZW1Db250YWluZXIgPSAkdGhpcy5jbG9zZXN0KFwiLnRlYW1fX2l0ZW1cIik7XHJcblxyXG4gICAgaWYgKGVsZW1Db250YWluZXIuaGFzQ2xhc3MoXCJhY3RpdmVcIikpIHtcclxuICAgICAgICBjbG9zZUV2ZXJ5SXRlbShjb250YWluZXIpO1xyXG4gICAgfSAgIGVsc2Uge1xyXG4gICAgICAgIGNsb3NlRXZlcnlJdGVtKGNvbnRhaW5lcik7XHJcbiAgICAgICAgb3Blbkl0ZW0oJHRoaXMpO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG59KTsiLCJsZXQgbXlNYXA7XHJcblxyXG5jb25zdCBpbml0ID0gKCkgPT4ge1xyXG5teU1hcCA9IG5ldyB5bWFwcy5NYXAoXCJtYXBcIiwge1xyXG4gICAgY2VudGVyOiBbNTkuOTM1Mjc0LCAzMC4zMTIzODhdLFxyXG4gICAgem9vbTogMTEsXHJcbiAgICBjb250cm9sczogW11cclxufSk7XHJcbmNvbnN0IGNvb3JkcyA9IFtcclxuICAgIFs1OS45NDU1NDMyNzk4OTI4NywgMzAuMzg5MzUyNjIxMTQ2NjhdLFxyXG4gICAgWzU5LjkxMTQyMzIzNTYzOTA5LCAzMC41MDAyNDU4NzA2NTg0MV1cclxuXTtcclxuY29uc3QgbXlDb2xsZWN0aW9uID0gbmV3IHltYXBzLkdlb09iamVjdENvbGxlY3Rpb24oe30sIHtcclxuICAgIGRyYWdnYWJsZTogZmFsc2UsXHJcbiAgICBpY29uTGF5b3V0OiAnZGVmYXVsdCNpbWFnZScsXHJcbiAgICBpY29uSW1hZ2VIcmVmOiBcIi9pbWcvbWFwcy5wbmdcIixcclxuICAgIGljb25JbWFnZVNpemU6IFs0NiwgNTddLFxyXG4gICAgaWNvbkltYWdlT2Zmc2V0OiBbLTM1LCAtNTFdXHJcbn0pO1xyXG5jb29yZHMuZm9yRWFjaChjb29yZCA9PiB7XHJcbiAgICBteUNvbGxlY3Rpb24uYWRkKG5ldyB5bWFwcy5QbGFjZW1hcmsoY29vcmQpKTtcclxufSlcclxubXlNYXAuZ2VvT2JqZWN0cy5hZGQobXlDb2xsZWN0aW9uKTtcclxuXHJcbm15TWFwLmJlaGF2aW9ycy5kaXNhYmxlKCdzY3JvbGxab29tJyk7XHJcbn1cclxueW1hcHMucmVhZHkoaW5pdCk7IiwibGV0IHZpZGVvO1xyXG5sZXQgZHVyYXRpb25Db250cm9sO1xyXG5sZXQgc291bmRDb250cm9sO1xyXG5sZXQgaW50ZXJ2YWxpZDtcclxubGV0IHNvdW5kTGV2ZWw7XHJcblxyXG52aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN2aWRlbycpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGU9PntcclxuICB2aWRlby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHBsYXlTdG9wKTtcclxuICBsZXQgcGxheUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGxheScpO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcGxheUJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgIHBsYXlCdXR0b25zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcGxheVN0b3ApO1xyXG4gIH1cclxubGV0IG1pY0NvbnRyb2wgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWljTGV2ZWwnKTtcclxubWljQ29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycgLCBzb3VuZE9mKTtcclxuXHJcbmR1cmF0aW9uQ29udHJvbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkdXJhdGlvbkxldmVsJyk7XHJcbi8vZHVyYXRpb25Db250cm9sLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHN0b3BJbnRlcnZhbCk7XHJcbmR1cmF0aW9uQ29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHNldFZpZGVvRHVyYXRpb24pO1xyXG5cclxuZHVyYXRpb25Db250cm9sLm1pbiA9IDA7XHJcbmR1cmF0aW9uQ29udHJvbC52YWx1ZSA9IDA7XHJcblxyXG5zb3VuZENvbnRyb2wgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndm9sdW1lTGV2ZWwnKTtcclxuc291bmRDb250cm9sLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hhbmdlU291bmRWb2x1bWUpO1xyXG5zb3VuZENvbnRyb2wuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGNoYW5nZVNvdW5kVm9sdW1lKTtcclxuXHJcblxyXG5zb3VuZENvbnRyb2wubWluID0gMDtcclxuc291bmRDb250cm9sLm1heCA9IDEwO1xyXG5cclxuc291bmRDb250cm9sLnZhbHVlID0gc291bmRDb250cm9sLm1heDtcclxufSlcclxuXHJcblxyXG5mdW5jdGlvbiBwbGF5U3RvcCgpe1xyXG4gIGxldCBwbGF5SW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvX19wbGF5Jyk7XHJcbiAgcGxheUltZy5jbGFzc0xpc3QudG9nZ2xlKCd2aWRlb19fcGxheS0tYWN0aXZlJyk7XHJcblxyXG4gIGR1cmF0aW9uQ29udHJvbC5tYXggPSB2aWRlby5kdXJhdGlvbjtcclxuXHJcbiAgaWYodmlkZW8ucGF1c2VkKXtcclxuICAgIHZpZGVvLnBsYXkoKTtcclxuICAgIGludGVydmFsaWQgPSBzZXRJbnRlcnZhbCh1cGRhdGVEdXJhdGlvbiAsIDEwMDAgLzY2KTtcclxuICB9ZWxzZXtcclxuICAgIHZpZGVvLnBhdXNlKCk7XHJcbiAgICBjbGVhckludGVydmFsKGludGVydmFsaWQpO1xyXG4gIH1cclxuICB1cGRhdGVEdXJhdGlvbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVEdXJhdGlvbigpIHtcclxuICBkdXJhdGlvbkNvbnRyb2wudmFsdWUgPSB2aWRlby5jdXJyZW50VGltZTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RvcEludGVydmFsKCl7XHJcbiAgdmlkZW8ucGF1c2UoKTtcclxuICBjbGVhckludGVydmFsKGludGVydmFsaWQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRWaWRlb0R1cmF0aW9uKCl7XHJcbiAgLy8gaWYodmlkZW8ucGF1c2VkKXtcclxuICAvLyAgIHZpZGVvLnBsYXkoKTtcclxuICAvLyB9ZWxzZXtcclxuICAvLyAgIHZpZGVvLnBhdXNlKCk7XHJcbiAgLy8gfVxyXG4gIHZpZGVvLmN1cnJlbnRUaW1lID0gZHVyYXRpb25Db250cm9sLnZhbHVlO1xyXG4gIGludGVydmFsaWQgPSBzZXRJbnRlcnZhbCh1cGRhdGVEdXJhdGlvbiAsIDEwMDAgLzY2KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hhbmdlU291bmRWb2x1bWUoKXtcclxuICB2aWRlby52b2x1bWUgPSBzb3VuZENvbnRyb2wudmFsdWUgLyAxMDtcclxufVxyXG5cclxuZnVuY3Rpb24gc291bmRPZigpe1xyXG4gIGlmKHZpZGVvLnZvbHVtZSA9PT0gMCl7XHJcbiAgICB2aWRlby52b2x1bWUgPSBzb3VuZExldmVsO1xyXG4gICAgc291bmRDb250cm9sLnZhbHVlID0gc291bmRMZXZlbCAqIDEwO1xyXG4gIH1lbHNle1xyXG4gICAgc291bmRMZXZlbCA9IHZpZGVvLnZvbHVtZTtcclxuICAgIHZpZGVvLnZvbHVtZSA9IDA7XHJcbiAgICBzb3VuZENvbnRyb2wudmFsdWUgPSAwO1xyXG4gIH1cclxufSIsImNvbnN0IHRvZ2dsZUhhbWJ1cmdlck1lbnUgPSAoKSA9PiB7XHJcbiAgICAkKCcjaGFtYnVyZ2VyJykudG9nZ2xlQ2xhc3MoJ2hhbWJ1cmdlci0tYWN0aXZlJyk7XHJcbiAgICAkKCcubWVudScpLnRvZ2dsZUNsYXNzKCdtZW51LS1hY3RpdmUnKTtcclxufVxyXG4kKCcjaGFtYnVyZ2VyJykub24oJ2NsaWNrJywgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRvZ2dsZUhhbWJ1cmdlck1lbnUoKTtcclxufSlcclxuXHJcbiQoJy5tZW51X19saW5rJykub24oJ2NsaWNrJywgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRvZ2dsZUhhbWJ1cmdlck1lbnUoKTtcclxufSkiLCJjb25zdCB2YWxpZGF0ZUZpZWxkcyA9IChmb3JtLCBmaWVsZHNBcnJheSkgPT4ge1xyXG5cclxuXHJcbiAgIGZpZWxkc0FycmF5LmZvckVhY2goZmllbGQgPT4ge1xyXG4gICAgICAgIGZpZWxkLnJlbW92ZUNsYXNzKFwiaW5wdXQtZXJyb3JcIik7XHJcbiAgICBpZiAoZmllbGQudmFsKCkudHJpbSgpID09PSBcIlwiKSB7XHJcbiAgICAgICAgZmllbGQuYWRkQ2xhc3MoXCJpbnB1dC1lcnJvclwiKTtcclxuICAgIH1cclxuICAgIH0pXHJcbiAgICBcclxuICAgIGNvbnN0IGVycm9yRmllbGRzID0gZm9ybS5maW5kKFwiLmlucHV0LWVycm9yXCIpO1xyXG5cclxuICAgIHJldHVybiBlcnJvckZpZWxkcy5sZW5ndGggPT09IDA7XHJcbn1cclxuJCgnLmZvcm0nKS5zdWJtaXQoZSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgY29uc3QgZm9ybSA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcclxuICAgIGNvbnN0IG5hbWUgPSBmb3JtLmZpbmQoXCJbbmFtZT0nbmFtZSddXCIpO1xyXG4gICAgY29uc3QgcGhvbmUgPSBmb3JtLmZpbmQoXCJbbmFtZT0ncGhvbmUnXVwiKTtcclxuICAgIGNvbnN0IGNvbW1lbnQgPSBmb3JtLmZpbmQoXCJbbmFtZT0nY29tbWVudCddXCIpO1xyXG4gICAgY29uc3QgdG8gPSBmb3JtLmZpbmQoXCJbbmFtZT0ndG8nXVwiKTtcclxuXHJcbiAgICBjb25zdCBtb2RhbCA9ICQoXCIjbW9kYWxcIik7XHJcbiAgICBjb25zdCBjb250ZW50ID0gbW9kYWwuZmluZChcIi5tb2RhbF9fY29udGVudFwiKTtcclxuXHJcbiAgICBtb2RhbC5yZW1vdmVDbGFzcyhcImVycm9yLW1vZGFsXCIpO1xyXG5cclxuY29uc3QgaXNWYWxpZCA9IHZhbGlkYXRlRmllbGRzKGZvcm0sIFtuYW1lLCBwaG9uZSwgY29tbWVudCwgdG9dKTtcclxuXHJcbmlmIChpc1ZhbGlkKSB7XHJcblxyXG4gICAgY29uc3QgcmVxdWVzdCA9ICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiBcImh0dHBzOi8vd2ViZGV2LWFwaS5sb2Z0c2Nob29sLmNvbS9zZW5kbWFpbFwiLFxyXG4gICAgICAgIG1ldGhvZDogXCJwb3N0XCIsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICBuYW1lOiBuYW1lLnZhbCgpLFxyXG4gICAgICAgICAgICBwaG9uZTogcGhvbmUudmFsKCksXHJcbiAgICAgICAgICAgIGNvbW1lbnQ6IGNvbW1lbnQudmFsKCksXHJcbiAgICAgICAgICAgIHRvOiB0by52YWwoKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICBcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC5kb25lKChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29udGVudC50ZXh0KGRhdGEubWVzc2FnZSk7XHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QuZmFpbChkYXRhID0+IHtcclxuICAgICAgICBsZXQgbWVzc2FnZTtcclxuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmhhc093blByb3BlcnR5KCdyZXNwb25zZUpTT04nKSAmJiBkYXRhLnJlc3BvbnNlSlNPTi5oYXNPd25Qcm9wZXJ0eSgnbWVzc2FnZScpKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBkYXRhLnJlc3BvbnNlSlNPTi5tZXNzYWdlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSAn0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsCwg0L/QvtC/0YDQvtCx0YPQudGC0LUg0L/QvtC30LbQtSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnRlbnQudGV4dChtZXNzYWdlKTtcclxuICAgICAgICBtb2RhbC5hZGRDbGFzcyhcImVycm9yLW1vZGFsXCIpO1xyXG4gICAgfSlcclxuICAgIHJlcXVlc3QuYWx3YXlzKCgpID0+IHtcclxuICAgICAgICAkLmZhbmN5Ym94Lm9wZW4oe1xyXG4gICAgICAgICAgICBzcmM6IFwiI21vZGFsXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiaW5saW5lXCIsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KVxyXG59XHJcbn0pO1xyXG5cclxuJChcIi5hcHAtc3VibWl0LWJ0blwiKS5jbGljayhlID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAkLmZhbmN5Ym94LmNsb3NlKCk7XHJcbn0pOyIsIjsoZnVuY3Rpb24oKXtcclxuICAgIGNvbnN0IGl0ZW1zID0gJCgnLm1lbnUtcHJvZF9faXRlbScpO1xyXG4gICAgY29uc3QgZ2V0SXRlbVdpZHRoID0gKGl0ZW0pID0+IHtcclxuICAgICAgbGV0IHJlc3VsdFdpZHRoID0gNTI0O1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgY29uc3Qgd2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcclxuICAgICAgY29uc3QgaXRlbVdpZHRoID0gaXRlbS5vdXRlcldpZHRoKHRydWUpO1xyXG4gICAgXHJcbiAgICAgIGNvbnN0IGlzVGFibGV0ID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDc2OHB4JykubWF0Y2hlcztcclxuXHJcbiAgICAgIGNvbnN0IGlzTW9iaWxlID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDQ4MHB4JykubWF0Y2hlcztcclxuXHJcblxyXG4gICAgICBpZiAoaXNUYWJsZXQpIHtcclxuICAgICAgICByZXN1bHRXaWR0aCA9IHdpbmRvd1dpZHRoIC0gaXRlbVdpZHRoICogaXRlbXMubGVuZ3RoO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChpc01vYmlsZSkge1xyXG4gICAgICAgIHJlc3VsdFdpZHRoID0gd2luZG93V2lkdGggLSBpdGVtV2lkdGg7XHJcbiAgICAgIH1cclxuICAgIFxyXG4gICAgICByZXR1cm4gcmVzdWx0V2lkdGg7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHNldEl0ZW1XaXRoID0gKGl0ZW0sIHdpZHRoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGl0ZW1Db250ZW50ID0gaXRlbS5uZXh0KCk7XHJcbiAgICAgIGNvbnN0IGl0ZW1UZXh0ID0gaXRlbUNvbnRlbnQuY2hpbGRyZW4oKTtcclxuICAgICBcclxuICAgIFxyXG4gICAgICBpdGVtQ29udGVudC53aWR0aCh3aWR0aCArICdweCcpO1xyXG4gICAgICBpZiAod2lkdGggIT09IDApIHtcclxuICAgICAgaXRlbVRleHQub3V0ZXJXaWR0aCh3aWR0aCArICdweCcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGNsb3NlSXRlbSA9IChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IGl0ZW1QYXJlbnQgPSBpdGVtLnBhcmVudCgpO1xyXG4gICAgICBpdGVtUGFyZW50LnJlbW92ZUNsYXNzKCdtZW51LXByb2RfX2l0ZW0tLWFjdGl2ZScpO1xyXG4gICAgICBpdGVtLnJlbW92ZUNsYXNzKCdtZW51LXByb2RfX2J1dHRvbi0tYWN0aXZlJyk7XHJcbiAgICBcclxuICAgICAgc2V0SXRlbVdpdGgoaXRlbSwgMCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IG9wZW5JdGVtVmFyaWFudCA9IChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IGl0ZW1QYXJlbnQgPSBpdGVtLnBhcmVudCgpO1xyXG4gICAgICBpdGVtUGFyZW50LmFkZENsYXNzKFwibWVudS1wcm9kX19pdGVtLS1hY3RpdmVcIik7XHJcbiAgICAgIGl0ZW0uYWRkQ2xhc3MoXCJtZW51LXByb2RfX2J1dHRvbi0tYWN0aXZlXCIpO1xyXG4gICAgXHJcbiAgICAgIGNvbnN0IHdpZHRoID0gZ2V0SXRlbVdpZHRoKGl0ZW0pO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgc2V0SXRlbVdpdGgoaXRlbSwgd2lkdGgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAkKCcubWVudS1wcm9kX19idXR0b24nKS5jbGljayhlID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICAgIGNvbnN0IGlzQWN0aXZlID0gJHRoaXMuaGFzQ2xhc3MoJ21lbnUtcHJvZF9fYnV0dG9uLS1hY3RpdmUnKTtcclxuICAgICAgY29uc3QgYWN0aXZlRWxlbWVudCA9ICQoJy5tZW51LXByb2RfX2J1dHRvbi0tYWN0aXZlJyk7XHJcbiAgICBcclxuICAgICAgaWYgKCR0aGlzLmhhc0NsYXNzKCdtZW51LXByb2RfX2J1dHRvbicpICYmIGlzQWN0aXZlKSB7XHJcbiAgICAgICAgaWYgKGFjdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgICAgIGNsb3NlSXRlbShhY3RpdmVFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIFxyXG4gICAgICBpZiAoJHRoaXMuaGFzQ2xhc3MoJ21lbnUtcHJvZF9fYnV0dG9uJykgJiYgIWlzQWN0aXZlKSB7XHJcbiAgICAgICAgaWYgKGFjdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgICAgIGNsb3NlSXRlbShhY3RpdmVFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgb3Blbkl0ZW1WYXJpYW50KCR0aGlzKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSkoKTsiLCJjb25zdCBmaW5kQmxvY2tCeUFsaWFzID0gYWxpYXMgPT4ge1xyXG4gICAgcmV0dXJuICQoXCIucmV2aWV3c19faXRlbVwiKS5maWx0ZXIoKG5keCwgaXRlbSkgPT4ge1xyXG4gICAgICAgIHJldHVybiAkKGl0ZW0pLmF0dHIoXCJkYXRhLWxpbmtlZC13aXRoXCIpID09IGFsaWFzO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4kKFwiLmludGVyYWN0aXZlLWF2YXRhcl9fbGlua1wiKS5jbGljayggZSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICBjb25zdCB0YXJnZXQgPSAkdGhpcy5hdHRyKFwiZGF0YS1vcGVuXCIpO1xyXG4gICAgY29uc3QgaXRlbVRvU2hvdyA9IGZpbmRCbG9ja0J5QWxpYXModGFyZ2V0KTtcclxuICAgIGNvbnN0IGN1ckl0ZW0gPSAkdGhpcy5jbG9zZXN0KFwiLnJldmlld3NfX3N3aXRjaGVyLWl0ZW1cIik7XHJcblxyXG4gICAgaXRlbVRvU2hvdy5hZGRDbGFzcyhcInJldmlld3NfX2l0ZW0tLWFjdGl2ZVwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwicmV2aWV3c19faXRlbS0tYWN0aXZlXCIpO1xyXG4gICAgY3VySXRlbS5hZGRDbGFzcyhcImludGVyYWN0aXZlLWF2YXRhci0tYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJpbnRlcmFjdGl2ZS1hdmF0YXItLWFjdGl2ZVwiKTtcclxufSk7IiwiY29uc3Qgc2xpZGVyID0gJCgnLmxvbmdfX3NsaWRlcicpLmJ4U2xpZGVyKHtcclxuICAgIHBhZ2VyOiBmYWxzZSxcclxuICAgIGNvbnRyb2xzOiBmYWxzZVxyXG59KTtcclxuXHJcbiQoJy5zbGlkZXJfX3Byb2QtLWJhY2snKS5jbGljayhlID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHNsaWRlci5nb1RvUHJldlNsaWRlKCk7XHJcbn0pXHJcbiQoJy5zbGlkZXJfX3Byb2QtLW5leHQnKS5jbGljayhlID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHNsaWRlci5nb1RvTmV4dFNsaWRlKCk7XHJcbn0pIiwiOyhmdW5jdGlvbigpe1xyXG4gICAgbGV0IG9uZVBhZ2VTY3JvbGwgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud3JhcHBlcicpO1xyXG4gICAgICBjb25zdCBjb250ZW50ID0gd3JhcHBlci5xdWVyeVNlbGVjdG9yKCcubWFpbmNvbnRlbnQnKTtcclxuICAgICAgY29uc3QgcGFnZXMgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uJyk7XHJcbiAgICAgIGNvbnN0IHBvaW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maXhlZC1tZW51X19pdGVtJyk7XHJcbiAgICAgIGNvbnN0IGRhdGFTY3JvbGx0byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXNjcm9sbC10b10nKTtcclxuICAgIFxyXG4gICAgICBsZXQgaW5TY3JvbGwgPSBmYWxzZTtcclxuICAgIFxyXG4gICAgICBhZGROYXZpZ2F0aW9uKCk7XHJcbiAgICAgIHdoZWVsKCk7XHJcbiAgICAgIGtleVB1c2goKTtcclxuICAgIFxyXG4gICAgICBmdW5jdGlvbiBkb1RyYW5zaXRpb24ocGFnZU51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gYCR7cGFnZU51bWJlciAqICgtMTAwKX0lYDtcclxuICAgIFxyXG4gICAgICAgIGlmIChpblNjcm9sbCkgcmV0dXJuO1xyXG4gICAgICAgIGluU2Nyb2xsID0gdHJ1ZTtcclxuICAgICAgICBhZGRDbGFzcyhwYWdlcyk7XHJcbiAgICBcclxuICAgICAgICBjb250ZW50LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKCR7cG9zaXRpb259KWA7XHJcbiAgICBcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIGluU2Nyb2xsID0gZmFsc2U7XHJcbiAgICAgICAgICBhZGRDbGFzcyhwb2ludHMpO1xyXG4gICAgICAgIH0sIDEwMDApO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkQ2xhc3MoYXJyKSB7XHJcbiAgICAgICAgICBhcnJbcGFnZU51bWJlcl0uY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtICE9IGFycltwYWdlTnVtYmVyXSkge1xyXG4gICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgY29uc3QgZGF0YUxpZ2h0ID0gcGFnZXNbcGFnZU51bWJlcl0uZGF0YXNldC5saWdodDtcclxuICAgICAgICAgIGNvbnN0IGZpeGVkTWVudSA9ICQoJy5maXhlZC1tZW51X19pdGVtJyk7XHJcbiAgICAgICAgICBjb25zdCBmaXhlZE1lbnVMaW5rID0gJCgnLmZpeGVkLW1lbnVfX2xpbmsnKTtcclxuICAgICAgICAgIGNvbnN0IGhhbWJ1cmdlciA9ICQoJy5oYW1idXJnZXJfX3BsYW5rJyk7XHJcbiAgICAgICAgICBpZiAoZGF0YUxpZ2h0ID09IDEpIHtcclxuICAgICAgICAgICAgZml4ZWRNZW51LmFkZENsYXNzKCdkYXJrJyk7XHJcbiAgICAgICAgICAgIGZpeGVkTWVudUxpbmsuYWRkQ2xhc3MoJ2RhcmsnKTtcclxuICAgICAgICAgICAgaGFtYnVyZ2VyLmFkZENsYXNzKCdkYXJrJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmaXhlZE1lbnUucmVtb3ZlQ2xhc3MoJ2RhcmsnKTtcclxuICAgICAgICAgICAgZml4ZWRNZW51TGluay5yZW1vdmVDbGFzcygnZGFyaycpO1xyXG4gICAgICAgICAgICBoYW1idXJnZXIucmVtb3ZlQ2xhc3MoJ2RhcmsnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgfVxyXG4gICBcclxuICAgICAgZnVuY3Rpb24gYWRkTmF2aWdhdGlvbigpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHBvaW50IG9mIGRhdGFTY3JvbGx0bykge1xyXG4gICAgICAgICAgcG9pbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBkb1RyYW5zaXRpb24ocG9pbnQuZGF0YXNldC5zY3JvbGxUbyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgXHJcbiAgICAgIGZ1bmN0aW9uIHdoZWVsKCkge1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBkaXJlY3QgPSBlLmRlbHRhWSA+IDAgPyAndXAnIDogJ2Rvd24nO1xyXG4gICAgXHJcbiAgICAgICAgICBzY3JvbGxUb1BhZ2UoZGlyZWN0KTtcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICBcclxuICAgICAgZnVuY3Rpb24ga2V5UHVzaCgpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZSA9PiB7XHJcbiAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xyXG4gICAgICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgICAgIHNjcm9sbFRvUGFnZSgndXAnKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICBzY3JvbGxUb1BhZ2UoJ2Rvd24nKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICBcclxuICAgICAgZnVuY3Rpb24gZGVmaW5lUGFnZShhcnIpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgbGV0IGl0ZXIgPSBhcnJbaV07XHJcbiAgICAgICAgICBpZiAoaXRlci5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgaXRlckluZGV4OiBpLFxyXG4gICAgICAgICAgICAgIGl0ZXJBY3RpdmU6IGl0ZXIsXHJcbiAgICAgICAgICAgICAgaXRlck5leHQ6IGl0ZXIubmV4dEVsZW1lbnRTaWJsaW5nLFxyXG4gICAgICAgICAgICAgIGl0ZXJQcmV2OiBpdGVyLnByZXZpb3VzRWxlbWVudFNpYmxpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgXHJcbiAgICAgIGZ1bmN0aW9uIHNjcm9sbFRvUGFnZShkaXJlY3QpIHtcclxuICAgICAgICBsZXQgcGFnZSA9IGRlZmluZVBhZ2UocGFnZXMpO1xyXG4gICAgICAgIGlmIChkaXJlY3QgPT09ICd1cCcgJiYgcGFnZS5pdGVyTmV4dCkge1xyXG4gICAgICAgICAgbGV0IG51bVBhZ2UgPSBwYWdlLml0ZXJJbmRleCArIDE7XHJcbiAgICBcclxuICAgICAgICAgIGRvVHJhbnNpdGlvbihudW1QYWdlKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBpZiAoZGlyZWN0ID09PSAnZG93bicgJiYgcGFnZS5pdGVyUHJldikge1xyXG4gICAgICAgICAgbGV0IG51bVBhZ2UgPSBwYWdlLml0ZXJJbmRleCAtIDE7XHJcbiAgICAgICAgICBkb1RyYW5zaXRpb24obnVtUGFnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG9uZVBhZ2VTY3JvbGwoKTtcclxuICAgIFxyXG4gIH0pKCk7Il19
